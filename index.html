document.getElementById('stockSet').value = 'major30';
            document.getElementById('maxStocks').value = '30';
            document.getElementById('customStocks').value = '';
            document.getElementById('customStocksDiv').style.display = 'none';<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ªå¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .api-setup {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #007bff;
        }

        .api-setup h3 {
            color: #007bff;
            margin-bottom: 10px;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4facfe;
        }

        .section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #ffecd2, #fcb69f);
            color: #333;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .results {
            margin-top: 30px;
        }

        .results h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .stock-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stock-table th,
        .stock-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .stock-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #333;
        }

        .stock-table tr:hover {
            background: #f8f9fa;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }

        .error {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .status {
            text-align: center;
            padding: 20px;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ˆ æ ªå¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã§æŠ•è³‡å¯¾è±¡ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†</p>
        </div>

        <div class="content">
            <div class="api-setup">
                <h3>ğŸ“¡ Alpha Vantage APIè¨­å®š</h3>
                <div class="form-group">
                    <label for="apiKey">APIã‚­ãƒ¼:</label>
                    <input type="text" id="apiKey" placeholder="Alpha Vantage APIã‚­ãƒ¼ã‚’å…¥åŠ›" value="demo">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        ç„¡æ–™APIã‚­ãƒ¼ã¯ <a href="https://www.alphavantage.co/support/#api-key" target="_blank">ã“ã¡ã‚‰</a> ã‹ã‚‰å–å¾—ã§ãã¾ã™
                    </small>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ¯ æ¤œç´¢å¯¾è±¡è¨­å®š</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="stockSet">éŠ˜æŸ„ã‚»ãƒƒãƒˆ:</label>
                        <select id="stockSet" onchange="updateStockSet()">
                            <option value="major30">ä¸»è¦30éŠ˜æŸ„</option>
                            <option value="nikkei225">æ—¥çµŒ225</option>
                            <option value="topix100">TOPIX100</option>
                            <option value="tech">ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼æ ª</option>
                            <option value="pharma">è£½è–¬æ ª</option>
                            <option value="finance">é‡‘èæ ª</option>
                            <option value="custom">ã‚«ã‚¹ã‚¿ãƒ éŠ˜æŸ„</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maxStocks">æœ€å¤§å–å¾—æ•°:</label>
                        <select id="maxStocks">
                            <option value="10">10éŠ˜æŸ„</option>
                            <option value="20">20éŠ˜æŸ„</option>
                            <option value="30" selected>30éŠ˜æŸ„</option>
                            <option value="50">50éŠ˜æŸ„</option>
                            <option value="100">100éŠ˜æŸ„</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" id="customStocksDiv" style="display: none;">
                    <label for="customStocks">ã‚«ã‚¹ã‚¿ãƒ éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰:</label>
                    <textarea id="customStocks" placeholder="ä¾‹: 7203.T, 6758.T, 9984.T, 4519.T" rows="3"></textarea>
                    <small style="color: #666; display: block; margin-top: 5px;">
                        æ—¥æœ¬æ ªã¯ã€ŒéŠ˜æŸ„ã‚³ãƒ¼ãƒ‰.Tã€ã€ç±³å›½æ ªã¯ã€ŒAAPLã€å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„
                    </small>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ’° ä¾¡æ ¼æ¡ä»¶</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minPrice">æœ€ä½ä¾¡æ ¼ (å††):</label>
                        <input type="number" id="minPrice" placeholder="ä¾‹: 1000" step="1">
                    </div>
                    <div class="form-group">
                        <label for="maxPrice">æœ€é«˜ä¾¡æ ¼ (å††):</label>
                        <input type="number" id="maxPrice" placeholder="ä¾‹: 50000" step="1">
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ“Š è²¡å‹™æŒ‡æ¨™</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minVolume">æœ€ä½å‡ºæ¥é«˜:</label>
                        <input type="number" id="minVolume" placeholder="ä¾‹: 100000">
                    </div>
                    <div class="form-group">
                        <label for="maxVolume">æœ€é«˜å‡ºæ¥é«˜:</label>
                        <input type="number" id="maxVolume" placeholder="ä¾‹: 10000000">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minChange">æœ€ä½å¤‰åŒ–ç‡ (%):</label>
                        <input type="number" id="minChange" placeholder="ä¾‹: -10" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="maxChange">æœ€é«˜å¤‰åŒ–ç‡ (%):</label>
                        <input type="number" id="maxChange" placeholder="ä¾‹: 10" step="0.1">
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ¢ æ¥­ç•Œãƒ»å¸‚å ´</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="market">å¸‚å ´:</label>
                        <select id="market">
                            <option value="all">å…¨å¸‚å ´</option>
                            <option value="TSE">æ±äº¬è¨¼åˆ¸å–å¼•æ‰€</option>
                            <option value="TSE1">æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ </option>
                            <option value="TSE2">æ±è¨¼ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰</option>
                            <option value="TSE3">æ±è¨¼ã‚°ãƒ­ãƒ¼ã‚¹</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sector">ã‚»ã‚¯ã‚¿ãƒ¼:</label>
                        <select id="sector">
                            <option value="all">å…¨ã‚»ã‚¯ã‚¿ãƒ¼</option>
                            <option value="Automotive">è‡ªå‹•è»Š</option>
                            <option value="Technology">ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼</option>
                            <option value="Healthcare">åŒ»è–¬å“ãƒ»ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢</option>
                            <option value="Finance">é‡‘è</option>
                            <option value="Manufacturing">è£½é€ æ¥­</option>
                            <option value="Consumer">æ¶ˆè²»è€…ã‚µãƒ¼ãƒ“ã‚¹</option>
                            <option value="Materials">ç´ æ</option>
                            <option value="Utilities">å…¬ç›Šäº‹æ¥­</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="searchStocks()">
                    ğŸ” æ¤œç´¢å®Ÿè¡Œ
                </button>
                <button class="btn btn-secondary" onclick="resetForm()">
                    ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
                </button>
            </div>

            <div class="results">
                <h3>æ¤œç´¢çµæœ</h3>
                <div id="searchResults" class="status">
                    æ¤œç´¢æ¡ä»¶ã‚’è¨­å®šã—ã¦ãã ã•ã„
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«æ ªå¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã®APIã‹ã‚‰å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ä¾‹ï¼‰
        let stockDatabase = [];
        let searchHistory = [];

        // Alpha Vantage APIã‹ã‚‰æ ªå¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        async function fetchStockData(symbol, apiKey) {
            try {
                const response = await fetch(
                    `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${apiKey}`
                );
                const data = await response.json();
                
                if (data['Global Quote']) {
                    const quote = data['Global Quote'];
                    return {
                        symbol: quote['01. symbol'],
                        price: parseFloat(quote['05. price']),
                        change: parseFloat(quote['09. change']),
                        changePercent: parseFloat(quote['10. change percent'].replace('%', '')),
                        volume: parseInt(quote['06. volume']),
                        high: parseFloat(quote['03. high']),
                        low: parseFloat(quote['04. low']),
                        open: parseFloat(quote['02. open']),
                        previousClose: parseFloat(quote['08. previous close']),
                        name: getJapaneseStockName(quote['01. symbol'])
                    };
                }
                return null;
            } catch (error) {
                console.error('APIå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                return null;
            }
        }

        // è¤‡æ•°ã®æ ªå¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        async function fetchMultipleStocks(symbols, apiKey) {
            const results = [];
            const delay = 12000; // APIåˆ¶é™å¯¾å¿œï¼ˆç„¡æ–™ç‰ˆã¯5 calls/minuteï¼‰
            
            for (let i = 0; i < symbols.length; i++) {
                const stockData = await fetchStockData(symbols[i], apiKey);
                if (stockData) {
                    results.push(stockData);
                }
                
                // APIåˆ¶é™å¯¾å¿œã®å¾…æ©Ÿ
                if (i < symbols.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            
            return results;
        }

        // æ—¥æœ¬æ ªä¸»è¦30éŠ˜æŸ„ã®ã‚·ãƒ³ãƒœãƒ«ãƒªã‚¹ãƒˆ
        const majorStocks = [
            '7203.T',   // ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š
            '6758.T',   // ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—
            '4519.T',   // ä¸­å¤–è£½è–¬
            '6861.T',   // ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹
            '4661.T',   // ã‚ªãƒªã‚¨ãƒ³ã‚¿ãƒ«ãƒ©ãƒ³ãƒ‰
            '8035.T',   // æ±äº¬ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ³
            '9984.T',   // ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—
            '4568.T',   // ç¬¬ä¸€ä¸‰å…±
            '8316.T',   // ä¸‰äº•ä½å‹ãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—
            '7974.T',   // ä»»å¤©å ‚
            '6954.T',   // ãƒ•ã‚¡ãƒŠãƒƒã‚¯
            '9432.T',   // æ—¥æœ¬é›»ä¿¡é›»è©±
            '4503.T',   // ã‚¢ã‚¹ãƒ†ãƒ©ã‚¹è£½è–¬
            '8058.T',   // ä¸‰è±å•†äº‹
            '9433.T',   // KDDI
            '4452.T',   // èŠ±ç‹
            '6098.T',   // ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹
            '7267.T',   // æœ¬ç”°æŠ€ç ”å·¥æ¥­
            '9983.T',   // ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°
            '4578.T',   // å¤§å¡šãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹
            '8306.T',   // ä¸‰è±UFJãƒ•ã‚£ãƒŠãƒ³ã‚·ãƒ£ãƒ«ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—
            '6367.T',   // ãƒ€ã‚¤ã‚­ãƒ³å·¥æ¥­
            '4324.T',   // é›»é€šã‚°ãƒ«ãƒ¼ãƒ—
            '6594.T',   // æ—¥æœ¬é›»ç”£
            '8001.T',   // ä¼Šè—¤å¿ å•†äº‹
            '6902.T',   // ãƒ‡ãƒ³ã‚½ãƒ¼
            '4922.T',   // ã‚³ãƒ¼ã‚»ãƒ¼
            '7012.T',   // å·å´é‡å·¥æ¥­
            '6773.T',   // ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢
            '4704.T'    // ãƒˆãƒ¬ãƒ³ãƒ‰ãƒã‚¤ã‚¯ãƒ­
        ];

        // æ¤œç´¢æ©Ÿèƒ½
        async function searchStocks() {
            const apiKey = document.getElementById('apiKey').value;
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
            const minVolume = parseInt(document.getElementById('minVolume').value) || 0;
            const maxVolume = parseInt(document.getElementById('maxVolume').value) || Infinity;
            const minChange = parseFloat(document.getElementById('minChange').value) || -Infinity;
            const maxChange = parseFloat(document.getElementById('maxChange').value) || Infinity;
            const market = document.getElementById('market').value;
            const sector = document.getElementById('sector').value;

            if (!apiKey || apiKey === '') {
                showError('APIã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            const selectedStockSet = document.getElementById('stockSet').value;
            const maxStocks = document.getElementById('maxStocks').value;
            const setName = stockSets[selectedStockSet] ? stockSets[selectedStockSet].name : 'ã‚«ã‚¹ã‚¿ãƒ éŠ˜æŸ„';
            
            document.getElementById('searchResults').innerHTML = `
                <div class="loading">
                    <p>ğŸ“¡ ${setName}ï¼ˆæœ€å¤§${maxStocks}éŠ˜æŸ„ï¼‰ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...</p>
                    <p>å°‘ã€…ãŠå¾…ã¡ãã ã•ã„ï¼ˆAPIåˆ¶é™ã«ã‚ˆã‚Šæ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰</p>
                </div>
            `;

            try {
                // é¸æŠã•ã‚ŒãŸéŠ˜æŸ„ã‚»ãƒƒãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const selectedStocks = getSelectedStocks();
                const stockData = await fetchMultipleStocks(selectedStocks, apiKey);
                
                if (stockData.length === 0) {
                    showError('ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚APIã‚­ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const filteredStocks = stockData.filter(stock => {
                    return stock.price >= minPrice && 
                           stock.price <= maxPrice &&
                           stock.volume >= minVolume &&
                           stock.volume <= maxVolume &&
                           stock.changePercent >= minChange &&
                           stock.changePercent <= maxChange;
                });

                // çµæœè¡¨ç¤º
                displayResults(filteredStocks);
                
                // æ¤œç´¢å±¥æ­´ã«è¿½åŠ 
                addToSearchHistory({
                    timestamp: new Date(),
                    conditions: { minPrice, maxPrice, minVolume, maxVolume, minChange, maxChange },
                    resultCount: filteredStocks.length
                });

            } catch (error) {
                console.error('æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
                showError('æ¤œç´¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            }
        }

        // çµæœè¡¨ç¤º
        function displayResults(stocks) {
            const resultsDiv = document.getElementById('searchResults');
            
            if (stocks.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="status">
                        <p>æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹æ ªå¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
                        <p>æ¡ä»¶ã‚’èª¿æ•´ã—ã¦å†åº¦æ¤œç´¢ã—ã¦ãã ã•ã„</p>
                    </div>
                `;
                return;
            }

            let tableHTML = `
                <div class="success">
                    ${stocks.length}ä»¶ã®æ ªå¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ
                </div>
                <table class="stock-table">
                    <thead>
                        <tr>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>ä¼æ¥­å</th>
                            <th>ç¾åœ¨ä¾¡æ ¼</th>
                            <th>å¤‰åŒ–é¡</th>
                            <th>å¤‰åŒ–ç‡</th>
                            <th>å‡ºæ¥é«˜</th>
                            <th>é«˜å€¤</th>
                            <th>å®‰å€¤</th>
                            <th>å§‹å€¤</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            stocks.forEach(stock => {
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                tableHTML += `
                    <tr>
                        <td><strong>${stock.symbol}</strong></td>
                        <td>${stock.name}</td>
                        <td>Â¥${Math.round(stock.price).toLocaleString()}</td>
                        <td style="color: ${stock.change >= 0 ? 'green' : 'red'}">
                            ${stock.change >= 0 ? '+' : ''}Â¥${Math.round(stock.change).toLocaleString()}
                        </td>
                        <td style="color: ${stock.changePercent >= 0 ? 'green' : 'red'}">
                            ${stock.changePercent >= 0 ? '+' : ''}${stock.changePercent.toFixed(2)}%
                        </td>
                        <td>${stock.volume.toLocaleString()}</td>
                        <td>Â¥${Math.round(stock.high).toLocaleString()}</td>
                        <td>Â¥${Math.round(stock.low).toLocaleString()}</td>
                        <td>Â¥${Math.round(stock.open).toLocaleString()}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            resultsDiv.innerHTML = tableHTML;
        }

        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            document.getElementById('searchResults').innerHTML = `
                <div class="error">
                    <strong>ã‚¨ãƒ©ãƒ¼:</strong> ${message}
                </div>
            `;
        }

        // æ¤œç´¢å±¥æ­´ã«è¿½åŠ 
        function addToSearchHistory(searchData) {
            searchHistory.push(searchData);
            // æœ€æ–°10ä»¶ã®ã¿ä¿æŒ
            if (searchHistory.length > 10) {
                searchHistory.shift();
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
        function resetForm() {
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            document.getElementById('minVolume').value = '';
            document.getElementById('maxVolume').value = '';
            document.getElementById('minChange').value = '';
            document.getElementById('maxChange').value = '';
            document.getElementById('market').value = 'all';
            document.getElementById('sector').value = 'all';
            
            document.getElementById('searchResults').innerHTML = `
                <div class="status">
                    æ¤œç´¢æ¡ä»¶ã‚’è¨­å®šã—ã¦ãã ã•ã„
                </div>
            `;
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ ªå¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
            
            // ãƒ‡ãƒ¢ç”¨ã®æ³¨æ„æ›¸ãè¡¨ç¤º
            if (document.getElementById('apiKey').value === 'demo') {
                document.getElementById('searchResults').innerHTML = `
                    <div class="error">
                        <strong>æ³¨æ„:</strong> ç¾åœ¨ãƒ‡ãƒ¢APIã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚<br>
                        å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ç„¡æ–™ã®Alpha Vantage APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
